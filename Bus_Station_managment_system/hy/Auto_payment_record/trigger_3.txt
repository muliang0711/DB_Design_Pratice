CREATE OR REPLACE TRIGGER TKT_AU_CUST_TO_PAY
AFTER UPDATE OF customerId ON ticket
FOR EACH ROW
WHEN (OLD.customerId IS NULL AND NEW.customerId IS NOT NULL)
BEGIN
  GEN_PAYMENT_FOR_TICKET(:NEW.ticketId, :NEW.customerId, :NEW.price);
END;
/
SHOW ERRORS TRIGGER TKT_AU_CUST_TO_PAY;
